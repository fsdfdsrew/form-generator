<template>
  <div class="container">
    <h1>–§–æ—Ä–º–∞ A —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏</h1>
    <FormGenerator
      :fields="formFields"
      :form-key="'formA'"
      @save="handleSave"
      @cancel="handleCancel"
    >
      <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π input —Å –∏–∫–æ–Ω–∫–æ–π -->
      <template #name="{ value, update }">
        <div class="custom-input">
          <input
            type="text"
            :value="value"
            placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..."
            @input="update('name', ($event.target as HTMLInputElement).value)"
          />
          <span>üîç</span>
        </div>
      </template>

      <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π —á–µ–∫–±–æ–∫—Å -->
      <template #agree="{ value, update }">
        <label class="custom-checkbox">
          <input
            type="checkbox"
            :checked="value"
            @change="
              update('agree', ($event.target as HTMLInputElement).checked)
            "
          />
          <span>‚úî</span>
          <span>–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å —É—Å–ª–æ–≤–∏—è–º–∏</span>
        </label>
      </template>
    </FormGenerator>
  </div>
</template>

<script lang="ts" setup>
import { computed } from "vue";
import FormGenerator from "../components/FormGenerator.vue";
import { useStore } from "vuex";

const store = useStore();
const formData = computed(() => store.state.formData);

const formFields = [
  { type: "input", label: "–ò–º—è", name: "name" },
  { type: "checkbox", label: "–°–æ–≥–ª–∞—Å–∏–µ", name: "agree", required: true },
];

const handleSave = (data: any) => {
  console.log("–§–æ—Ä–º–∞ A —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:", data);
  alert("–§–æ—Ä–º–∞ A —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!");
};

const handleCancel = () => {
  console.log("–§–æ—Ä–º–∞ A –æ—Ç–º–µ–Ω–µ–Ω–∞");
  store.commit("resetForm");
  alert("–§–æ—Ä–º–∞ A —Å–±—Ä–æ—à–µ–Ω–∞!");
};
</script>

<style scoped>
.custom-input {
  display: flex;
  align-items: center;
  border: 1px solid #ccc;
  padding: 5px;
  border-radius: 5px;
}

.custom-input input {
  border: none;
  outline: none;
  flex-grow: 1;
}

.custom-checkbox {
  display: flex;
  align-items: center;
  gap: 10px;
}

.custom-checkbox input {
  width: 20px;
  height: 20px;
}
</style>
